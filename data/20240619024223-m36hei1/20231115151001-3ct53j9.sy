{"ID":"20231115151001-3ct53j9","Spec":"2","Type":"NodeDocument","Properties":{"id":"20231115151001-3ct53j9","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20231115151001-s6i5rq7\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20231115151001-noqs6oj\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20231115174037-5he5rp1\u0026quot;,\u0026quot;scrollTop\u0026quot;:8246,\u0026quot;focusId\u0026quot;:\u0026quot;20231115174037-5he5rp1\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"Unity Mask和RectMask2D","type":"doc","updated":"20231115174037"},"Children":[{"ID":"20231115151001-oeto91f","Type":"NodeParagraph","Properties":{"id":"20231115151001-oeto91f","updated":"20231115155522"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"主要区别："},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"}]},{"ID":"20231115155113-kojn77o","Type":"NodeParagraph","Properties":{"id":"20231115155113-kojn77o","updated":"20231115155114"},"Children":[{"Type":"NodeText","Data":"1、"}]},{"ID":"20231115154915-ziti6hl","Type":"NodeParagraph","Properties":{"id":"20231115154915-ziti6hl","updated":"20231115155858"},"Children":[{"Type":"NodeText","Data":"Mask可以处理不规则图形的遮罩。"}]},{"ID":"20231115155029-khk8f5d","Type":"NodeParagraph","Properties":{"id":"20231115155029-khk8f5d","updated":"20231115155858"},"Children":[{"Type":"NodeText","Data":"RectMask2D只能处理矩形遮罩。"}]},{"ID":"20231115155138-dl0axl1","Type":"NodeParagraph","Properties":{"id":"20231115155138-dl0axl1","updated":"20231115155138"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115155138-d5ta80w.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115155139-f9yslow","Type":"NodeParagraph","Properties":{"id":"20231115155139-f9yslow","updated":"20231115155140"},"Children":[{"Type":"NodeText","Data":"2、"}]},{"ID":"20231115155141-v2eyymp","Type":"NodeParagraph","Properties":{"id":"20231115155141-v2eyymp","updated":"20231115155857"},"Children":[{"Type":"NodeText","Data":"Mask需要一个Image来作为遮罩区域，子节点在Image的渲染区域才会显示。"}]},{"ID":"20231115155250-7zyq82w","Type":"NodeParagraph","Properties":{"id":"20231115155250-7zyq82w","updated":"20231115155356"},"Children":[{"Type":"NodeText","Data":"RectMask2D以自身的RectTransform作为遮罩区域，子节点在RectTransform区域才会显示。"}]},{"ID":"20231115155356-afxji3o","Type":"NodeParagraph","Properties":{"id":"20231115155356-afxji3o"}},{"ID":"20231115155417-njrxsw7","Type":"NodeParagraph","Properties":{"id":"20231115155417-njrxsw7","updated":"20231115155533"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"其他区别："},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"}]},{"ID":"20231115155538-ptmrab0","Type":"NodeParagraph","Properties":{"id":"20231115155538-ptmrab0","updated":"20231115155703"},"Children":[{"Type":"NodeText","Data":"1、RectMask2D只能在2D空间中使用。不能处理不共面的元素。"}]},{"ID":"20231115155703-iqzp4z0","Type":"NodeParagraph","Properties":{"id":"20231115155703-iqzp4z0","updated":"20231115155854"},"Children":[{"Type":"NodeText","Data":"2、RectMask2D不适用模板缓冲区，不需要额外的Draw Call，不需要更改材质。"}]},{"ID":"20231115155830-odpazfs","Type":"NodeParagraph","Properties":{"id":"20231115155830-odpazfs","updated":"20231115155851"},"Children":[{"Type":"NodeText","Data":"3、RectMask2D的性能更高。"}]},{"ID":"20231115155901-yjdmyfy","Type":"NodeParagraph","Properties":{"id":"20231115155901-yjdmyfy"}},{"ID":"20231115155909-bkiedlw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231115155909-bkiedlw","updated":"20231115155943"},"Children":[{"Type":"NodeText","Data":"性能方面"}]},{"ID":"20231115155947-uitbkpx","Type":"NodeParagraph","Properties":{"id":"20231115155947-uitbkpx","updated":"20231115161110"},"Children":[{"Type":"NodeText","Data":"Mask在渲染的首尾（首=Mask节点，尾=Mask节点下的孩子全部遍历完毕后）会产生2个Draw Call。而RectMask2D不会产生DrawCall。"}]},{"ID":"20231115172901-ccpamcq","Type":"NodeParagraph","Properties":{"id":"20231115172901-ccpamcq","updated":"20231115172919"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Draw Call对比："}]},{"ID":"20231115161201-73bzf8j","Type":"NodeParagraph","Properties":{"id":"20231115161201-73bzf8j","updated":"20231115161306"},"Children":[{"Type":"NodeText","Data":"新建一个场景,默认drawcall（batches）数是"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"2"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"（天空盒1个drawcall, Camera1个drawcall）。"}]},{"ID":"20231115161223-f4ex9qz","Type":"NodeParagraph","Properties":{"id":"20231115161223-f4ex9qz","updated":"20231115161223"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161223-4wj2tnn.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-fs6hlxd","Type":"NodeParagraph","Properties":{"id":"20231115161201-fs6hlxd","updated":"20231115161201"},"Children":[{"Type":"NodeText","Data":"现在添加一个Mask(Mask对象上有一个Image组件,子节点也是一个Image)"}]},{"ID":"20231115161322-bcuktm3","Type":"NodeParagraph","Properties":{"id":"20231115161322-bcuktm3","updated":"20231115161328"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161322-98q84k2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161328-xi0n266.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-rg42nyy","Type":"NodeParagraph","Properties":{"id":"20231115161201-rg42nyy","updated":"20231115161424"},"Children":[{"Type":"NodeText","Data":"drawcall从"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"2"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"上升到"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"5"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 一个Mask导致增加了"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"3"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"个drawcall。"}]},{"ID":"20231115161201-gx7zccy","Type":"NodeParagraph","Properties":{"id":"20231115161201-gx7zccy","updated":"20231115161431"},"Children":[{"Type":"NodeText","Data":"通过Frame Debug工具查到drawcall来源\nMask导致2个drawcall（第1个和第3个，一头一尾），Mask下的子节点Image导致1个drawcall（中间的）"}]},{"ID":"20231115161449-dnoccfj","Type":"NodeParagraph","Properties":{"id":"20231115161449-dnoccfj","updated":"20231115161449"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161449-8iho938.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-fur5ova","Type":"NodeParagraph","Properties":{"id":"20231115161201-fur5ova","updated":"20231115161505"},"Children":[{"Type":"NodeText","Data":"再看下RectMask2D的情况（隐藏Mask, 显示RectMask2D）"}]},{"ID":"20231115161459-pvl9bu4","Type":"NodeParagraph","Properties":{"id":"20231115161459-pvl9bu4","updated":"20231115161459"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161459-5j4ryib.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-8jh9vem","Type":"NodeParagraph","Properties":{"id":"20231115161201-8jh9vem","updated":"20231115161511"},"Children":[{"Type":"NodeText","Data":"drawcall为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"3"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 只有新增"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"1"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"个drawcall."}]},{"ID":"20231115161520-eu63k9v","Type":"NodeParagraph","Properties":{"id":"20231115161520-eu63k9v","updated":"20231115161520"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161520-i4wy026.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-hgfvzse","Type":"NodeParagraph","Properties":{"id":"20231115161201-hgfvzse","updated":"20231115161201"},"Children":[{"Type":"NodeText","Data":"从Frame Debug可以看出就是子节点Image导致的1个drawcall, 而RectMask2D不会导致drawcall."}]},{"ID":"20231115161608-n9yn5mo","Type":"NodeParagraph","Properties":{"id":"20231115161608-n9yn5mo","updated":"20231115161608"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115161608-ml438kg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115161201-zu9l6wj","Type":"NodeParagraph","Properties":{"id":"20231115161201-zu9l6wj","updated":"20231115161703"}},{"ID":"20231115161659-h85pfrk","Type":"NodeParagraph","Properties":{"id":"20231115161659-h85pfrk","updated":"20231115172956"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"合批对比："}]},{"ID":"20231115173023-28eh9sn","Type":"NodeParagraph","Properties":{"id":"20231115173023-28eh9sn","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"把Mask复制一个出来Mask(1), 然后把位置摆开, 让2个Mask别重叠(后面会解释为什么不重叠)."}]},{"ID":"20231115173040-hknblns","Type":"NodeParagraph","Properties":{"id":"20231115173040-hknblns","updated":"20231115173040"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173040-l4psc1d.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-zffysbz","Type":"NodeParagraph","Properties":{"id":"20231115173023-zffysbz","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"摆成这个样子(不重叠就行)"}]},{"ID":"20231115173049-0mo7bkf","Type":"NodeParagraph","Properties":{"id":"20231115173049-0mo7bkf","updated":"20231115173049"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173049-uob0ixj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-mifwp1p","Type":"NodeParagraph","Properties":{"id":"20231115173023-mifwp1p","updated":"20231115173107"},"Children":[{"Type":"NodeText","Data":"然后再看一下drawcall情况, 还是"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"5"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"个drawcall, 没有变化.\nUnity把2个Mask进行了"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"网格合并"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 3个drawcall, 分别为[2个Mask头]、[2个Image]、[2个Mask尾]."}]},{"ID":"20231115173023-8fjd7cs","Type":"NodeParagraph","Properties":{"id":"20231115173023-8fjd7cs","updated":"20231115173207"},"Children":[{"Type":"NodeText","Data":"这里可以看出, "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"Mask之间是可以进行合并的, 从而不额外增加drawcall"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"}]},{"ID":"20231115173221-42moci8","Type":"NodeParagraph","Properties":{"id":"20231115173221-42moci8","updated":"20231115173221"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173221-nczh2nn.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-1npaonj","Type":"NodeParagraph","Properties":{"id":"20231115173023-1npaonj","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"刚才强调不要重叠,现在看下如果重叠的话会出现什么情况\n现在把2个Mask摆成下图这样."}]},{"ID":"20231115173231-7pp637d","Type":"NodeParagraph","Properties":{"id":"20231115173231-7pp637d","updated":"20231115173231"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173231-3dyer0h.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-rw4rm38","Type":"NodeParagraph","Properties":{"id":"20231115173023-rw4rm38","updated":"20231115173243"},"Children":[{"Type":"NodeText","Data":"然后会发现drawcall飙升至"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"8"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"."}]},{"ID":"20231115173240-act3jbi","Type":"NodeParagraph","Properties":{"id":"20231115173240-act3jbi","updated":"20231115173240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173240-x7squ8k.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-8pzdjet","Type":"NodeParagraph","Properties":{"id":"20231115173023-8pzdjet","updated":"20231115173324"},"Children":[{"Type":"NodeText","Data":"这是因为Unity的合批需要"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"同渲染层级(depth), 同材质, 同图集"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 如果重叠了, depth就不同了, 6个drawcall分别为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color11);"},"TextMarkType":"text","TextMarkTextContent":"Mask头、Mask的Image、Mask尾、"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color11);\"}"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color3);"},"TextMarkType":"text","TextMarkTextContent":"Mask(1)头、Mask(1)的Image、Mask(1)尾"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color3);\"}"},{"Type":"NodeText","Data":"."}]},{"ID":"20231115173023-2dzgcy8","Type":"NodeParagraph","Properties":{"id":"20231115173023-2dzgcy8","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"把2个Mask位置还原, 然后在Mask外创建一个Image, 看看Mask和外部的合并情况."}]},{"ID":"20231115173341-jjs7ht5","Type":"NodeParagraph","Properties":{"id":"20231115173341-jjs7ht5","updated":"20231115173341"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173341-ed1i196.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-28o80d6","Type":"NodeParagraph","Properties":{"id":"20231115173023-28o80d6","updated":"20231115173450"},"Children":[{"Type":"NodeText","Data":"drawcall为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"6"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 增加了1个drawcall, 说明Mask内外无法合批（外面的Image和Mask的子Image无法合批）"}]},{"ID":"20231115173023-0bbp9c1","Type":"NodeParagraph","Properties":{"id":"20231115173023-0bbp9c1","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"然后把外部Image的Hierarchy的层级降低(2个Mask下面)"}]},{"ID":"20231115173503-0oj6rdb","Type":"NodeParagraph","Properties":{"id":"20231115173503-0oj6rdb","updated":"20231115173503"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173503-o840zuh.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-fhgfyl1","Type":"NodeParagraph","Properties":{"id":"20231115173023-fhgfyl1","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"然后把Image放到Mask下"}]},{"ID":"20231115173510-bj92dju","Type":"NodeParagraph","Properties":{"id":"20231115173510-bj92dju","updated":"20231115173510"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173510-cibccd2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-z6ji5op","Type":"NodeParagraph","Properties":{"id":"20231115173023-z6ji5op","updated":"20231115173521"},"Children":[{"Type":"NodeText","Data":"然后drawcall变成了"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"9"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":", 因为破坏了一个Mask的depth, 导致2个Mask无法合批, 这也再次验证了, Unity的合批需要depth相同."}]},{"ID":"20231115173519-ijt9qta","Type":"NodeParagraph","Properties":{"id":"20231115173519-ijt9qta","updated":"20231115173519"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173519-a8l9kc0.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-061zgv5","Type":"NodeParagraph","Properties":{"id":"20231115173023-061zgv5","updated":"20231115173616"},"Children":[{"Type":"NodeText","Data":"最后看一下这种情况下的drawcall顺序\n7个drawcall从上到下分别为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"Mask(1)的头、"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color3);"},"TextMarkType":"text","TextMarkTextContent":"蓝色Image、"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color3);\"}"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color11);"},"TextMarkType":"text","TextMarkTextContent":"Mask的头、"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color11);\"}"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"Mask(1)的Image、Mask(1)尾、"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color11);"},"TextMarkType":"text","TextMarkTextContent":"Mask的Image、Mask的尾."},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color11);\"}"}]},{"ID":"20231115173546-qhvglgf","Type":"NodeParagraph","Properties":{"id":"20231115173546-qhvglgf","updated":"20231115173546"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173546-jv71leh.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-p9d84a8","Type":"NodeParagraph","Properties":{"id":"20231115173023-p9d84a8","updated":"20231115173630"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Mask小结:"},{"Type":"NodeText","Data":"\n1.多个Mask之间可以进行合批(头和头合批, 子对象和子对象合批, 尾和尾合批),需要同渲染层级(depth), 同材质, 同图集.\n2.Mask内外不能进行合批."}]},{"ID":"20231115173653-9wvpkxx","Type":"NodeThematicBreak","Properties":{"id":"20231115173653-9wvpkxx"}},{"ID":"20231115173023-bp57car","Type":"NodeParagraph","Properties":{"id":"20231115173023-bp57car","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"再试试RectMask2D\n把RectMask2D复制一个出来RectMask2D(1), 然后把位置摆开."}]},{"ID":"20231115173659-px8k4iz","Type":"NodeParagraph","Properties":{"id":"20231115173659-px8k4iz","updated":"20231115173659"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173659-ju4zv9j.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-r14i6n1","Type":"NodeParagraph","Properties":{"id":"20231115173023-r14i6n1","updated":"20231115173023"},"Children":[{"Type":"NodeText","Data":"然后看drawcall为4, 因为RectMask2D本身不会导致drawcall, 所以RectMask2D之间不能进行合批."}]},{"ID":"20231115173708-vudtqss","Type":"NodeParagraph","Properties":{"id":"20231115173708-vudtqss","updated":"20231115173708"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231115173708-g9qyosy.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231115173023-j1nirxk","Type":"NodeParagraph","Properties":{"id":"20231115173023-j1nirxk","updated":"20231115173632"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"RectMask2D小结:"},{"Type":"NodeText","Data":"\n1.RectMask2D本身不产生drawcall.\n2.不同RectMask2D的子对象不能合批.\n"}]},{"ID":"20231115173721-bany3ie","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231115173721-bany3ie","updated":"20231115173721"},"Children":[{"Type":"NodeText","Data":"总结 :"}]},{"ID":"20231115173721-uurk05q","Type":"NodeParagraph","Properties":{"id":"20231115173721-uurk05q","updated":"20231115173721"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如果界面只需要一个遮罩, 推荐使用RectMask2D, 如果界面需要多个遮罩, 根据情况分析, 看多个遮罩之间能否合批, 如果可以则可以考虑使用Mask."}]},{"ID":"20231115173755-7ueawqf","Type":"NodeParagraph","Properties":{"id":"20231115173755-7ueawqf"}},{"ID":"20231115173959-u15nh6l","Type":"NodeParagraph","Properties":{"id":"20231115173959-u15nh6l"}},{"ID":"20231115174000-3xar8xo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231115174000-3xar8xo","updated":"20231115174007"},"Children":[{"Type":"NodeText","Data":"参考资料"}]},{"ID":"20231115174010-2skosl9","Type":"NodeParagraph","Properties":{"id":"20231115174010-2skosl9","updated":"20231115174010"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://blog.csdn.net/yu__jiaoshou/article/details/102742784","TextMarkTextContent":"Unity 3D - Mask和RectMask2D区别_mask和mask2d-CSDN博客"}]},{"ID":"20231115174022-lca1bsz","Type":"NodeParagraph","Properties":{"id":"20231115174022-lca1bsz","updated":"20231115174033"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://docs.unity3d.com/2019.1/Documentation/ScriptReference/UI.RectMask2D.html","TextMarkTextContent":"Unity - Scripting API: RectMask2D (unity3d.com)"}]},{"ID":"20231115174037-owgcx8n","Type":"NodeParagraph","Properties":{"id":"20231115174037-owgcx8n"}}]}