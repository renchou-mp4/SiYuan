{"ID":"20251112165440-ojxb4rz","Spec":"2","Type":"NodeDocument","Properties":{"id":"20251112165440-ojxb4rz","title":"三叶草总结","type":"doc","updated":"20251126172353"},"Children":[{"ID":"20251112173218-zxzo3ws","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251112173218-zxzo3ws","updated":"20251113203810"},"Children":[{"Type":"NodeText","Data":"一、获取奖励数据（VO）"}]},{"ID":"20251112173135-clq1sdd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251112173135-clq1sdd","style":"line-height: 22px;","updated":"20251113203625"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"QyM="},{"Type":"NodeCodeBlockCode","Data":"//reward是奖励字符串，_reward是BaseData3VO\n_reward = new BaseData3VO();\nList\u003cBaseData3VO\u003e rewardList = BaseData3VO.GetBaseData3VOList(reward);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251113203421-awl9t3h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251113203421-awl9t3h","style":"line-height: 22px;","updated":"20251113203810"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"QyM="},{"Type":"NodeCodeBlockCode","Data":"//添加奖励\nObjectManager.GetInstance().itemDataModel.AddRewardBaseData3(new List\u003cBaseData3VO\u003e()\n{\n\treward\n}, false, EItemGetUse.get_clover);\n//添加奖励的时候需要增加对应的枚举值EItemGetUse.get_clover\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251112173900-18o765q","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251112173900-18o765q","updated":"20251125193646"},"Children":[{"Type":"NodeText","Data":"二、本地数据存储"}]},{"ID":"20251113204231-82ffafy","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20251113204231-82ffafy","updated":"20251125193646"},"Children":[{"ID":"20251113204233-od34qcl","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20251113204233-od34qcl","updated":"20251125193646"},"Children":[{"ID":"20251113204233-2i2xugx","Type":"NodeParagraph","Properties":{"id":"20251113204233-2i2xugx","updated":"20251113204238"},"Children":[{"Type":"NodeText","Data":"VO方面"}]},{"ID":"20251113204338-1v2ps1z","Type":"NodeParagraph","Properties":{"id":"20251113204338-1v2ps1z","updated":"20251125193646"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"height: 37vh;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20251112173906-o02mbiq.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"height: 37vh;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20251113204329-f8m1e3o","Type":"NodeParagraph","Properties":{"id":"20251113204329-f8m1e3o","updated":"20251113204329"},"Children":[{"Type":"NodeText","Data":"预计好要存储什么数据，活动的进度保存在这里，通过清理本地存储重置活动。继承ActivityBaseVO"}]},{"ID":"20251113204333-t13ip3l","Type":"NodeParagraph","Properties":{"id":"20251113204333-t13ip3l","updated":"20251113204333"},"Children":[{"Type":"NodeText","Data":"当本地VO数据被修改的时候就必须保存到本地一次，看情况上传服务器"}]}]},{"ID":"20251113204448-4piy967","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20251113204448-4piy967","updated":"20251114102436"},"Children":[{"ID":"20251113204448-woh862f","Type":"NodeParagraph","Properties":{"id":"20251113204448-woh862f","updated":"20251113204456"},"Children":[{"Type":"NodeText","Data":"Model方面"}]},{"ID":"20251113204456-l94i6y3","Type":"NodeList","ListData":{},"Properties":{"id":"20251113204456-l94i6y3","updated":"20251114102436"},"Children":[{"ID":"20251113204604-rp4kavw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113204604-rp4kavw","updated":"20251113204604"},"Children":[{"ID":"20251113204604-73ptafs","Type":"NodeParagraph","Properties":{"id":"20251113204604-73ptafs","updated":"20251113204604"},"Children":[{"Type":"NodeText","Data":"必须要有对应的Key，作为保存本地数据的Key，持有VO"}]}]},{"ID":"20251113204607-kgprc8m","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113204607-kgprc8m","updated":"20251113204607"},"Children":[{"ID":"20251113204607-4onc3l1","Type":"NodeParagraph","Properties":{"id":"20251113204607-4onc3l1","updated":"20251113205237"},"Children":[{"Type":"NodeText","Data":"持有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IPopup = new CloverActivityPopupHelper();"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20251114101531-b76t8mi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251114101531-b76t8mi","updated":"20251114102436"},"Children":[{"ID":"20251114101531-u3po82t","Type":"NodeParagraph","Properties":{"id":"20251114101531-u3po82t","updated":"20251114102436"},"Children":[{"Type":"NodeText","Data":"在InitModel中需要初始化VO和注册活动ID，Init放到ObjectManager中"}]}]},{"ID":"20251114102123-nx8ehn2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251114102123-nx8ehn2","updated":"20251114102314"},"Children":[{"ID":"20251114102123-fjihhog","Type":"NodeParagraph","Properties":{"id":"20251114102123-fjihhog","updated":"20251114102314"},"Children":[{"Type":"NodeText","Data":"同步服务器数据到本地"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string json = ServerManager.Instance.GetServerItem(m_Key);"},{"Type":"NodeText","Data":"​获取服务器json数据然后反序列化。从服务器同步的方法放到ObjectManager中"}]}]}]}]}]},{"ID":"20251112174105-su7gne8","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251112174105-su7gne8","updated":"20251126165350"},"Children":[{"Type":"NodeText","Data":"三、活动开关管理"}]},{"ID":"20251112180114-oi1dc2g","Type":"NodeParagraph","Properties":{"id":"20251112180114-oi1dc2g","updated":"20251113171436"},"Children":[{"Type":"NodeText","Data":"ActivitySwitchManager（需要在这里添加ActivityID）"}]},{"ID":"20251112180107-lny3654","Type":"NodeList","ListData":{},"Properties":{"id":"20251112180107-lny3654","updated":"20251126165350"},"Children":[{"ID":"20251112180125-j1bqfl7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251112180125-j1bqfl7","updated":"20251112180125"},"Children":[{"ID":"20251112180125-k245wac","Type":"NodeParagraph","Properties":{"id":"20251112180125-k245wac","updated":"20251112180437"},"Children":[{"Type":"NodeText","Data":"软硬开关：ActivityBaseModel中有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IsOpenSoftSwitch"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IsOpenHardSwitch"},{"Type":"NodeText","Data":"​。调用的是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ActivitySwitchManager.Instance.IsOpenActivitySwitch"},{"Type":"NodeText","Data":"​查看是否开启的软硬开关"}]}]},{"ID":"20251112180447-xckh8uo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251112180447-xckh8uo","updated":"20251112180447"},"Children":[{"ID":"20251112180447-asesf5b","Type":"NodeParagraph","Properties":{"id":"20251112180447-asesf5b","updated":"20251113164014"},"Children":[{"Type":"NodeText","Data":"服务器时间："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ActivitySwitchManager.GetActivityTimeServerConfig"},{"Type":"NodeText","Data":"​获取活动开启周期配置。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ServerTimeManager.TodayDateServerNumberV3"},{"Type":"NodeText","Data":"​获取服务器新一天刷新时间。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ServerTimeManager.ServerTimeV2"},{"Type":"NodeText","Data":"​获取服务器当前时间。若这两个时间\u003c=0则不开启"}]}]},{"ID":"20251113154418-j6rlwjq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113154418-j6rlwjq","updated":"20251126165350"},"Children":[{"ID":"20251113154418-rdnxicj","Type":"NodeParagraph","Properties":{"id":"20251113154418-rdnxicj","updated":"20251126165350"},"Children":[{"Type":"NodeText","Data":"活动资源下载：若是动态下载资源，要查看资源是否已下载完成。首先要在PackConfigCheckVO.EPackActivityID中添加资源ID。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ResMgr.Instance.ExistsActivityResourceById(Const_PackActivityID)"},{"Type":"NodeText","Data":"​判断是否有资源。这个判断的是一个AB包，若活动依赖了多个AB包，有几个检查几个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\nActivityBaseModel.HasActivityConfigResByThemeID"},{"Type":"NodeText","Data":"​判断是否有配置信息。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OnConfigAllFileExistOnConfigDownloadSucceed"},{"Type":"NodeText","Data":"​资源下载完成回调"}]}]},{"ID":"20251126165218-qhclhwb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126165218-qhclhwb","updated":"20251126165246"},"Children":[{"ID":"20251126165218-ylb6iep","Type":"NodeParagraph","Properties":{"id":"20251126165218-ylb6iep","updated":"20251126165246"},"Children":[{"Type":"NodeText","Data":"资源下载不需要手动管理，只需要查看是否有资源就行了"}]}]},{"ID":"20251113161543-t5j7vfy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113161543-t5j7vfy","updated":"20251113161543"},"Children":[{"ID":"20251113161543-0rfjafy","Type":"NodeParagraph","Properties":{"id":"20251113161543-0rfjafy","updated":"20251113161637"},"Children":[{"Type":"NodeText","Data":"（此为MC中的）Condition表中可能会配开启条件"}]}]},{"ID":"20251113161735-oqw8q4t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113161735-oqw8q4t","updated":"20251113161735"},"Children":[{"ID":"20251113161735-vkimgj7","Type":"NodeParagraph","Properties":{"id":"20251113161735-vkimgj7","updated":"20251113162126"},"Children":[{"Type":"NodeText","Data":"（此为MC中的）ActivityMutexConfig表中配置互斥的活动，将自己的功能与互斥的配置到一组中。设置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ActivityMutexManager.ActivityMutexID"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20251114114419-nfqkzsk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251114114419-nfqkzsk","updated":"20251114114455"},"Children":[{"ID":"20251114114419-e22n2rk","Type":"NodeParagraph","Properties":{"id":"20251114114419-e22n2rk","updated":"20251114114455"},"Children":[{"Type":"NodeText","Data":"在Model中每帧都会判断是否关闭活动"}]}]},{"ID":"20251113160945-i4vzuge","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113160945-i4vzuge","updated":"20251113160945"},"Children":[{"ID":"20251113160945-r0vj2j2","Type":"NodeParagraph","Properties":{"id":"20251113160945-r0vj2j2","updated":"20251113160956"},"Children":[{"Type":"NodeText","Data":"其他特殊开启要求"}]}]}]},{"ID":"20251113171355-20yhjib","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251113171355-20yhjib","updated":"20251126172353"},"Children":[{"Type":"NodeText","Data":"四、主题配置"}]},{"ID":"20251113180429-k8v9uo0","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20251113180429-k8v9uo0","updated":"20251113180813"},"Children":[{"ID":"20251113180436-n4aq67x","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20251113180436-n4aq67x","updated":"20251113180813"},"Children":[{"ID":"20251113180436-5t5yuq4","Type":"NodeParagraph","Properties":{"id":"20251113180436-5t5yuq4","updated":"20251113180813"},"Children":[{"Type":"NodeText","Data":"服务器下发主题配置。需要自己创建一个表"}]}]}]},{"ID":"20251113172302-wgn1p38","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20251113172302-wgn1p38","updated":"20251126172353"},"Children":[{"ID":"20251113180441-5vle9q4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20251113180441-5vle9q4","updated":"20251126172353"},"Children":[{"ID":"20251113180441-5h2pef5","Type":"NodeParagraph","Properties":{"id":"20251113180441-5h2pef5","updated":"20251126171636"},"Children":[{"Type":"NodeText","Data":"获取主题"}]},{"ID":"20251113180439-y1r0w2s","Type":"NodeList","ListData":{},"Properties":{"id":"20251113180439-y1r0w2s","updated":"20251126172353"},"Children":[{"ID":"20251113180537-8tr1pnd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113180537-8tr1pnd","updated":"20251113180537"},"Children":[{"ID":"20251113180537-09wpgbk","Type":"NodeParagraph","Properties":{"id":"20251113180537-09wpgbk","updated":"20251113180537"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ICloverActivityTheme"},{"Type":"NodeText","Data":"​普通类，存放单个主题相关设置"}]}]},{"ID":"20251113180652-pei98hv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113180652-pei98hv","updated":"20251113180652"},"Children":[{"ID":"20251113180652-bzr9isz","Type":"NodeParagraph","Properties":{"id":"20251113180652-bzr9isz","updated":"20251113180652"},"Children":[{"Type":"NodeText","Data":"在Model"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Dictionary\u0026lt;int, ICloverActivityTheme\u0026gt; themdMap"},{"Type":"NodeText","Data":"​中存放当前活动所有主题相关配置。"}]}]},{"ID":"20251113180703-pbtgnjx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113180703-pbtgnjx","updated":"20251113180703"},"Children":[{"ID":"20251113180703-ko54chs","Type":"NodeParagraph","Properties":{"id":"20251113180703-ko54chs","updated":"20251113180703"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ServerConfigManager.Instance.GetActivityConfigFileName"},{"Type":"NodeText","Data":"​获取对应活动配置的路径"}]}]},{"ID":"20251113180706-pbka05v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251113180706-pbka05v","updated":"20251113180706"},"Children":[{"ID":"20251113180706-x34mgnx","Type":"NodeParagraph","Properties":{"id":"20251113180706-x34mgnx","updated":"20251113180706"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"StaticDataManager.GetInstance().LoadStaticList"},{"Type":"NodeText","Data":"​通过路径获取配置表内容，存放到themdMap中"}]}]},{"ID":"20251126171656-1ehca31","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126171656-1ehca31","updated":"20251126172353"},"Children":[{"ID":"20251126171656-pbc442v","Type":"NodeParagraph","Properties":{"id":"20251126171656-pbc442v","updated":"20251126172353"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ServerActivityCurTimeConfig curTimeConfig = GetServerCurTimeConfig();"},{"Type":"NodeText","Data":"​获取当前活动当前服务器时间已开启的活动配置"}]}]},{"ID":"20251126171704-qyguzzz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126171704-qyguzzz","updated":"20251126171704"},"Children":[{"ID":"20251126171704-mo6mdwy","Type":"NodeParagraph","Properties":{"id":"20251126171704-mo6mdwy","updated":"20251126171704"},"Children":[{"Type":"NodeText","Data":"根据配置创建"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ActivityServerTimeConfig"},{"Type":"NodeText","Data":"​对象并返回"}]}]}]}]}]},{"ID":"20251113182449-w3ky045","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251113182449-w3ky045","updated":"20251113182803"},"Children":[{"Type":"NodeText","Data":"五、查找订单数据"}]},{"ID":"20251113182503-7yyzyma","Type":"NodeParagraph","Properties":{"id":"20251113182503-7yyzyma","updated":"20251113182514"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"List\u0026lt;SingleDynamicOrder\u0026gt; orders = ObjectManager.GetInstance().gameOrdersModel.ShowingOrders.FindAll(order =\u0026gt;  order != null \u0026amp;\u0026amp; !order.CanWaitCommit());"},{"Type":"NodeText","Data":"​"}]},{"ID":"20251113182516-kb16t7u","Type":"NodeParagraph","Properties":{"id":"20251113182516-kb16t7u","updated":"20251113182551"},"Children":[{"Type":"NodeText","Data":"通过gameOrdersModel模型获取当前显示订单然后筛选"}]},{"ID":"20251113182757-nx9htrl","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251113182757-nx9htrl","updated":"20251113201623"},"Children":[{"Type":"NodeText","Data":"六、存储数据，清除本地数据"}]},{"ID":"20251113182812-sh7nvbp","Type":"NodeParagraph","Properties":{"id":"20251113182812-sh7nvbp","updated":"20251113182854"},"Children":[{"Type":"NodeText","Data":"本地存储就是序列化VO然后调用BaseModel的SaveItem"}]},{"ID":"20251113182900-vuxvl93","Type":"NodeParagraph","Properties":{"id":"20251113182900-vuxvl93","updated":"20251113182914"},"Children":[{"Type":"NodeText","Data":"需要上传服务器就"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ServerManager.Instance.SaveServerItem(m_Key, json);"},{"Type":"NodeText","Data":"​"}]},{"ID":"20251113201607-wsv1coq","Type":"NodeParagraph","Properties":{"id":"20251113201607-wsv1coq","updated":"20251113201623"},"Children":[{"Type":"NodeText","Data":"清除本地数据可以直接new一个VO然后保存"}]},{"ID":"20251113182914-rej8szv","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251113182914-rej8szv","updated":"20251126165145"},"Children":[{"Type":"NodeText","Data":"七、弹窗管理"}]},{"ID":"20251126163730-fpj9agp","Type":"NodeParagraph","Properties":{"id":"20251126163730-fpj9agp","updated":"20251126164259"},"Children":[{"Type":"NodeText","Data":"定义IPopupDataDefine.CloverActivityPopupHelper   继承"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PopupMgrActivityAutoResigner_AdvancedPopup"},{"Type":"NodeText","Data":"​"}]},{"ID":"20251126163730-fuz0wn3","Type":"NodeParagraph","Properties":{"id":"20251126163730-fuz0wn3","updated":"20251126164159"},"Children":[{"Type":"NodeText","Data":"弹窗需要新增PopupId"}]},{"ID":"20251126163747-kai1nmz","Type":"NodeParagraph","Properties":{"id":"20251126163747-kai1nmz","updated":"20251126163747"},"Children":[{"Type":"NodeText","Data":"需要配置PopupsOrder表（scene字段为弹出的场景）"}]},{"ID":"20251126163730-3pv3bb7","Type":"NodeParagraph","Properties":{"id":"20251126163730-3pv3bb7","updated":"20251126164225"},"Children":[{"Type":"NodeText","Data":"创建一个CloverActivityPopupHelper对象，不能是静态的。当可以弹窗的时候会调用Model的打开方法。"}]},{"ID":"20251126164328-l2fuuyo","Type":"NodeParagraph","Properties":{"id":"20251126164328-l2fuuyo","updated":"20251126164400"},"Children":[{"Type":"NodeText","Data":"调用流程为："}]},{"ID":"20251126164403-m3nswyv","Type":"NodeList","ListData":{},"Properties":{"id":"20251126164403-m3nswyv","updated":"20251126165145"},"Children":[{"ID":"20251126164404-qxih1lp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126164404-qxih1lp","updated":"20251126164404"},"Children":[{"ID":"20251126164404-j8fq1b7","Type":"NodeParagraph","Properties":{"id":"20251126164404-j8fq1b7","updated":"20251126164737"},"Children":[{"Type":"NodeText","Data":"在创建Model对象的时候，会new一个CloverActivityPopupHelper，它的父类"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PopupMgrActivityAutoResigner_AdvancedPopup"},{"Type":"NodeText","Data":"​在构造函数中会监听触发事件"}]}]},{"ID":"20251126164720-eiawrpk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126164720-eiawrpk","updated":"20251126164720"},"Children":[{"ID":"20251126164720-5r3w732","Type":"NodeParagraph","Properties":{"id":"20251126164720-5r3w732","updated":"20251126164939"},"Children":[{"Type":"NodeText","Data":"当PopupMgr触发事件后，自动注册所有符合触发条件的弹窗"}]}]},{"ID":"20251126165017-pmt0yt3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126165017-pmt0yt3","updated":"20251126165145"},"Children":[{"ID":"20251126165017-ah40ho8","Type":"NodeParagraph","Properties":{"id":"20251126165017-ah40ho8","updated":"20251126165145"},"Children":[{"Type":"NodeText","Data":"当可以打开弹窗的时候，PopupMgr会调用对应弹窗PopupHelper的开启方法，这个方法中调用Model中的开启方法"}]}]}]},{"ID":"20251113203400-qllv2i5","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251113203400-qllv2i5","updated":"20251114160444"}},{"ID":"20251113203409-m5ox6re","Type":"NodeParagraph","Properties":{"id":"20251113203409-m5ox6re","updated":"20251113203409"}},{"ID":"20251114160444-8nb9o66","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20251114160444-8nb9o66","updated":"20251126164205"},"Children":[{"Type":"NodeText","Data":"八、总结"}]},{"ID":"20251114160453-xyc2j5c","Type":"NodeParagraph","Properties":{"id":"20251114160453-xyc2j5c","updated":"20251125194201"},"Children":[{"Type":"NodeText","Data":"需要添加："}]},{"ID":"20251125194202-d2yz4q7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20251125194202-d2yz4q7","updated":"20251125202329"},"Children":[{"ID":"20251125194215-xuemxy4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20251125194215-xuemxy4","updated":"20251125202329"},"Children":[{"ID":"20251125194215-9pi9l3k","Type":"NodeParagraph","Properties":{"id":"20251125194215-9pi9l3k","updated":"20251125194740"},"Children":[{"Type":"NodeText","Data":"VO 继承ActivityBaseVO"}]},{"ID":"20251125194220-696sgbr","Type":"NodeList","ListData":{},"Properties":{"id":"20251125194220-696sgbr","updated":"20251125202329"},"Children":[{"ID":"20251125194224-ksfq0vq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125194224-ksfq0vq","updated":"20251125202329"},"Children":[{"ID":"20251125194224-r9qeej8","Type":"NodeParagraph","Properties":{"id":"20251125194224-r9qeej8","updated":"20251125202329"},"Children":[{"Type":"NodeText","Data":"主要有活动开始结束时间，配置ID，主题ID，活动进度以及其他特定数据"}]}]}]}]}]},{"ID":"20251125194819-hs8ikt1","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20251125194819-hs8ikt1","updated":"20251126164205"},"Children":[{"ID":"20251125194823-e8518dm","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20251125194823-e8518dm","updated":"20251125194823"},"Children":[{"ID":"20251125194823-68ccxae","Type":"NodeParagraph","Properties":{"id":"20251125194823-68ccxae","updated":"20251125195242"},"Children":[{"Type":"NodeText","Data":"Model 继承ActivityBaseModel"}]},{"ID":"20251125194828-yrrd601","Type":"NodeList","ListData":{},"Properties":{"id":"20251125194828-yrrd601","updated":"20251125194830"},"Children":[{"ID":"20251125194830-rvjmxyq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125194830-rvjmxyq","updated":"20251125194830"},"Children":[{"ID":"20251125194830-y7gyyzp","Type":"NodeParagraph","Properties":{"id":"20251125194830-y7gyyzp","updated":"20251125194847"},"Children":[{"Type":"NodeText","Data":"ActivityID"}]}]},{"ID":"20251125194851-c5tumt6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125194851-c5tumt6","updated":"20251125194851"},"Children":[{"ID":"20251125194851-34qrc4m","Type":"NodeParagraph","Properties":{"id":"20251125194851-34qrc4m","updated":"20251125194946"},"Children":[{"Type":"NodeText","Data":"若是热更内容，需要有EPackActivityID"}]}]},{"ID":"20251125195001-u455mmf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125195001-u455mmf","updated":"20251125195001"},"Children":[{"ID":"20251125195001-mpcykjc","Type":"NodeParagraph","Properties":{"id":"20251125195001-mpcykjc","updated":"20251125195020"},"Children":[{"Type":"NodeText","Data":"Model本地缓存的Key"}]}]},{"ID":"20251125195428-ti1md53","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125195428-ti1md53","updated":"20251125195428"},"Children":[{"ID":"20251125195428-nbbxb4p","Type":"NodeParagraph","Properties":{"id":"20251125195428-nbbxb4p","updated":"20251126155700"},"Children":[{"Type":"NodeText","Data":"通过ActivityManager注册下载资源回调事件，重写回调方法  开始下载？"}]}]},{"ID":"20251125195727-jjok907","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125195727-jjok907","updated":"20251125195727"},"Children":[{"ID":"20251125195727-wl60lhv","Type":"NodeParagraph","Properties":{"id":"20251125195727-wl60lhv","updated":"20251125200447"},"Children":[{"Type":"NodeText","Data":"保存数据到本地 \\ 上传到服务器"}]}]},{"ID":"20251125195809-5ikj9yv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125195809-5ikj9yv","updated":"20251125195809"},"Children":[{"ID":"20251125195809-exnvgje","Type":"NodeParagraph","Properties":{"id":"20251125195809-exnvgje","updated":"20251125200238"},"Children":[{"Type":"NodeText","Data":"同步服务器数据到本地（ObjectManager）"}]}]},{"ID":"20251125195922-z554wkn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125195922-z554wkn","updated":"20251125195922"},"Children":[{"ID":"20251125195922-wfff7xt","Type":"NodeParagraph","Properties":{"id":"20251125195922-wfff7xt","updated":"20251125200335"},"Children":[{"Type":"NodeText","Data":"判断活动硬开关（ObjectManager）"}]}]},{"ID":"20251125201547-yviaqyn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125201547-yviaqyn","updated":"20251125201547"},"Children":[{"ID":"20251125201547-86hz1xs","Type":"NodeParagraph","Properties":{"id":"20251125201547-86hz1xs","updated":"20251125201554"},"Children":[{"Type":"NodeText","Data":"判断活动入口显示"}]}]},{"ID":"20251125201601-pu4a541","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125201601-pu4a541","updated":"20251125201601"},"Children":[{"ID":"20251125201601-ehbdtfv","Type":"NodeParagraph","Properties":{"id":"20251125201601-ehbdtfv","updated":"20251125201602"},"Children":[{"Type":"NodeText","Data":"判断指定主题的资源下载情况 \\ 配置下载情况"}]}]}]},{"ID":"20251125200101-uusgn55","Type":"NodeList","ListData":{},"Properties":{"id":"20251125200101-uusgn55","updated":"20251125200337"},"Children":[{"ID":"20251125200337-zfau1vb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125200337-zfau1vb","updated":"20251125200337"},"Children":[{"ID":"20251125200337-shlpm8v","Type":"NodeParagraph","Properties":{"id":"20251125200337-shlpm8v","updated":"20251125201620"},"Children":[{"Type":"NodeText","Data":"判断活动是否可以开启(活动时间，软硬开关， 资源配置下载)"}]}]},{"ID":"20251125205049-23y2los","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125205049-23y2los","updated":"20251125205049"},"Children":[{"ID":"20251125205049-qfpwm4w","Type":"NodeParagraph","Properties":{"id":"20251125205049-qfpwm4w","updated":"20251125205101"},"Children":[{"Type":"NodeText","Data":"获取服务器配置，加载本地配置"}]}]},{"ID":"20251125202306-7f8r9cg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125202306-7f8r9cg","updated":"20251125202306"},"Children":[{"ID":"20251125202306-9i8n1ib","Type":"NodeParagraph","Properties":{"id":"20251125202306-9i8n1ib","updated":"20251125202628"},"Children":[{"Type":"NodeText","Data":"获取活动VO数据方法，其他特定的数据层方法"}]}]},{"ID":"20251125205108-6zixztq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125205108-6zixztq","updated":"20251125205108"},"Children":[{"ID":"20251125205108-fl4lgjm","Type":"NodeParagraph","Properties":{"id":"20251125205108-fl4lgjm","updated":"20251125205108"},"Children":[{"Type":"NodeText","Data":"数据打点"}]}]}]}]},{"ID":"20251125202039-snm7bp9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20251125202039-snm7bp9","updated":"20251126164205"},"Children":[{"ID":"20251125202039-0augr10","Type":"NodeParagraph","Properties":{"id":"20251125202039-0augr10","updated":"20251125202044"},"Children":[{"Type":"NodeText","Data":"PopMgr"}]},{"ID":"20251125203212-twd5y8q","Type":"NodeList","ListData":{},"Properties":{"id":"20251125203212-twd5y8q","updated":"20251126164205"},"Children":[{"ID":"20251125203216-0ry39qe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251125203216-0ry39qe","updated":"20251125203216"},"Children":[{"ID":"20251125203216-8ps1st2","Type":"NodeParagraph","Properties":{"id":"20251125203216-8ps1st2","updated":"20251126162818"},"Children":[{"Type":"NodeText","Data":"实现IPopupDataDefine.CloverActivityPopupHelper   继承"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PopupMgrActivityAutoResigner_AdvancedPopup"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20251126154849-sb6l3fl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126154849-sb6l3fl","updated":"20251126164205"},"Children":[{"ID":"20251126154849-ym7m5xh","Type":"NodeParagraph","Properties":{"id":"20251126154849-ym7m5xh","updated":"20251126164205"},"Children":[{"Type":"NodeText","Data":"弹窗需要新增PopupId，需要配置PopupsOrder表（scene字段为弹出的场景）"}]}]},{"ID":"20251126162826-5je1yo9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126162826-5je1yo9","updated":"20251126163653"},"Children":[{"ID":"20251126162826-uz61cb4","Type":"NodeParagraph","Properties":{"id":"20251126162826-uz61cb4","updated":"20251126163653"},"Children":[{"Type":"NodeText","Data":"创建一个CloverActivityPopupHelper对象，不能是静态的。当可以弹窗的时候会调用Model的打开方法"}]}]}]}]},{"ID":"20251126115550-qb735qt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20251126115550-qb735qt","updated":"20251126162711"},"Children":[{"ID":"20251126115550-26ojq7o","Type":"NodeParagraph","Properties":{"id":"20251126115550-26ojq7o","updated":"20251126162549"},"Children":[{"Type":"NodeText","Data":"Config"}]},{"ID":"20251126162550-cs9hhv5","Type":"NodeList","ListData":{},"Properties":{"id":"20251126162550-cs9hhv5","updated":"20251126162711"},"Children":[{"ID":"20251126162611-qt18syq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251126162611-qt18syq","updated":"20251126162711"},"Children":[{"ID":"20251126162611-zp482c3","Type":"NodeParagraph","Properties":{"id":"20251126162611-zp482c3","updated":"20251126162711"},"Children":[{"Type":"NodeText","Data":"服务器配置让策划配。活动ID，预热，开启，关闭，领奖时间，主题ID"}]}]}]}]}]},{"ID":"20251125202029-xzjjqi8","Type":"NodeParagraph","Properties":{"id":"20251125202029-xzjjqi8","updated":"20251125202029"}}]}