{"ID":"20230825175116-6a3vcdy","Spec":"2","Type":"NodeDocument","Properties":{"id":"20230825175116-6a3vcdy","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230825175116-wi2ihgo\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230825175116-rku1z2k\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230828210201-o1tog19\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230825205242-9rv9adb\u0026quot;,\u0026quot;focusStart\u0026quot;:38,\u0026quot;focusEnd\u0026quot;:38\u0026#125;","title":"C# 内联","type":"doc","updated":"20230828210201"},"Children":[{"ID":"20230825175116-xhekxz8","Type":"NodeParagraph","Properties":{"id":"20230825175116-xhekxz8","updated":"20230825205231"},"Children":[{"Type":"NodeText","Data":"C#内联函数需要添加特性​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[MethodImpl(MethodImplOptions.AggressiveInlining)]"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230825205242-dn02hvd","Type":"NodeParagraph","Properties":{"id":"20230825205242-dn02hvd","updated":"20230825205307"},"Children":[{"Type":"NodeText","Data":"命名空间"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"System.Runtime.CompilerServices"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230825205308-cle3ucg","Type":"NodeParagraph","Properties":{"id":"20230825205308-cle3ucg","updated":"20230825205721"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color12);"},"TextMarkType":"text","TextMarkTextContent":"内联的作用"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color12);\"}"},{"Type":"NodeText","Data":"：内联可以节省函数调用的时间消耗（直接将内联的方法体替换到调用的地方），但也会增大内存（函数的方法体被多次复制，增大了代码区）。"}]},{"ID":"20230825205724-hug1jt4","Type":"NodeBlockquote","Properties":{"id":"20230825205724-hug1jt4","updated":"20230828204547"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20230825210206-63zr110","Type":"NodeParagraph","Properties":{"id":"20230825210206-63zr110","updated":"20230828204547"},"Children":[{"Type":"NodeText","Data":"C++ inline 关键词的本意是作为给优化器的指示器，以指示优先采用函数的内联替换而非进行函数调用，即并不执行将控制转移到函数体内的函数调用 CPU 指令，而是代之以执行函数体的一份副本而无需生成调用。这会避免函数调用的开销（传递实参及返回结果），但它可能导致更大的可执行文件，因为函数体必须被复制多次。"}]}]},{"ID":"20230825210139-ooas5lr","Type":"NodeParagraph","Properties":{"id":"20230825210139-ooas5lr","updated":"20230825210503"},"Children":[{"Type":"NodeText","Data":"内联并不是一定会执行的，这由编译器自主决定。此处的特性也只是建议性的，编译器会比较积极的去内联，但如果不符合条件，也不会内联。"}]},{"ID":"20230828204800-1vbmqfr","Type":"NodeParagraph","Properties":{"id":"20230828204800-1vbmqfr","updated":"20230828204800"},"Children":[{"Type":"NodeText","Data":"内联的使用注意事项："}]},{"ID":"20230828204725-jshfcq5","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20230828204725-jshfcq5","updated":"20230828205101"},"Children":[{"ID":"20230828204800-d3zt5ei","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20230828204800-d3zt5ei","updated":"20230828204800"},"Children":[{"ID":"20230828204800-tg52033","Type":"NodeParagraph","Properties":{"id":"20230828204800-tg52033","updated":"20230828205001"},"Children":[{"Type":"NodeText","Data":"内联的函数要尽量短小，最好不超过10行"}]}]},{"ID":"20230828205003-5yltpip","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20230828205003-5yltpip"},"Children":[{"ID":"20230828205003-n5lt6se","Type":"NodeParagraph","Properties":{"id":"20230828205003-n5lt6se","updated":"20230828205028"},"Children":[{"Type":"NodeText","Data":"内联函数中不能有循环、switch和递归"}]}]},{"ID":"20230828205048-b4n7bvi","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20230828205048-b4n7bvi","updated":"20230828205101"},"Children":[{"ID":"20230828205048-8tysail","Type":"NodeParagraph","Properties":{"id":"20230828205048-8tysail","updated":"20230828205101"},"Children":[{"Type":"NodeText","Data":"虚函数不能内联"}]}]}]},{"ID":"20230828205911-8279eux","Type":"NodeParagraph","Properties":{"id":"20230828205911-8279eux"}},{"ID":"20230828205912-4xgvtvq","Type":"NodeParagraph","Properties":{"id":"20230828205912-4xgvtvq","updated":"20230828210200"},"Children":[{"Type":"NodeText","Data":"参考资料：\n"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zhuanlan.zhihu.com/p/50812510","TextMarkTextContent":"被知乎大佬嘲讽后的一个月，我重新研究了一下内联函数 - 知乎 (zhihu.com)"},{"Type":"NodeText"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zhuanlan.zhihu.com/p/352156655","TextMarkTextContent":"C++内联(inline)函数 - 知乎 (zhihu.com)"},{"Type":"NodeText"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zh.cppreference.com/w/cpp/language/inline","TextMarkTextContent":"inline 说明符 - cppreference.com"},{"Type":"NodeText"}]},{"ID":"20230828210201-j01nmuj","Type":"NodeParagraph","Properties":{"id":"20230828210201-j01nmuj"}}]}