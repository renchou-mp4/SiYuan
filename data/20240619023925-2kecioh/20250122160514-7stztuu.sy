{"ID":"20250122160514-7stztuu","Spec":"1","Type":"NodeDocument","Properties":{"custom-sy-readonly":"true","id":"20250122160514-7stztuu","title":"C# Event 和 Delegate 的区别","type":"doc","updated":"20250618172912"},"Children":[{"ID":"20250122160517-qqgdhvq","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20250122160517-qqgdhvq","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"Event 和 Delegate 的区别"}]},{"ID":"20250122160517-ceis8wf","Type":"NodeParagraph","Properties":{"id":"20250122160517-ceis8wf","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"在 C# 中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"event"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"delegate"},{"Type":"NodeText","Data":"​ 是用于实现事件驱动编程的关键概念。它们密切相关，但在使用和功能上有显著区别。"}]},{"ID":"20250122160517-g1b0p6v","Type":"NodeThematicBreak","Properties":{"id":"20250122160517-g1b0p6v","updated":"20250122160517"}},{"ID":"20250122160517-rx5t5zr","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250122160517-rx5t5zr","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"1. Delegate（委托）"}]},{"ID":"20250122160517-m46a3hu","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160517-m46a3hu","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"定义"}]},{"ID":"20250122160517-2ud8iyt","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160517-2ud8iyt","updated":"20250122160517"},"Children":[{"ID":"20250122160517-5scnig6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-5scnig6","updated":"20250122160517"},"Children":[{"ID":"20250122160517-x4nqkxw","Type":"NodeParagraph","Properties":{"id":"20250122160517-x4nqkxw","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"**Delegate** 是一种类型，用于封装具有特定签名的方法。"}]}]},{"ID":"20250122160517-fyidrto","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-fyidrto","updated":"20250122160517"},"Children":[{"ID":"20250122160517-fbkmpgn","Type":"NodeParagraph","Properties":{"id":"20250122160517-fbkmpgn","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"它类似于函数指针，但更安全且面向对象。"}]}]},{"ID":"20250122160517-jyhwz7k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-jyhwz7k","updated":"20250122160517"},"Children":[{"ID":"20250122160517-s7ww54u","Type":"NodeParagraph","Properties":{"id":"20250122160517-s7ww54u","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"委托可以指向一个或多个方法（多播委托）。"}]}]}]},{"ID":"20250122160517-54bm298","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160517-54bm298","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"特点"}]},{"ID":"20250122160517-9z2gni8","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160517-9z2gni8","updated":"20250122160517"},"Children":[{"ID":"20250122160517-5l4o4id","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-5l4o4id","updated":"20250122160517"},"Children":[{"ID":"20250122160517-iypo2ss","Type":"NodeParagraph","Properties":{"id":"20250122160517-iypo2ss","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"委托是一种类型，需要先定义后使用。"}]}]},{"ID":"20250122160517-imn2bmr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-imn2bmr","updated":"20250122160517"},"Children":[{"ID":"20250122160517-2fplxzn","Type":"NodeParagraph","Properties":{"id":"20250122160517-2fplxzn","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"可以显式调用委托。"}]}]},{"ID":"20250122160517-u0d84m0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160517-u0d84m0","updated":"20250122160517"},"Children":[{"ID":"20250122160517-6ht2hsq","Type":"NodeParagraph","Properties":{"id":"20250122160517-6ht2hsq","updated":"20250122160517"},"Children":[{"Type":"NodeText","Data":"委托可以直接赋值和调用，例如："}]},{"ID":"20250122160517-m3629ln","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250122160517-m3629ln","updated":"20250122160517"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Y3NoYXJw"},{"Type":"NodeCodeBlockCode","Data":"public delegate void MyDelegate(string message);\nMyDelegate myDelegate = MethodName;\nmyDelegate(\"Hello, World!\");\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20250122160630-umk3d7d","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-umk3d7d","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"用途"}]},{"ID":"20250122160630-uykbht6","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160630-uykbht6","updated":"20250122160630"},"Children":[{"ID":"20250122160630-zce62qu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-zce62qu","updated":"20250122160630"},"Children":[{"ID":"20250122160630-supyts4","Type":"NodeParagraph","Properties":{"id":"20250122160630-supyts4","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"用于实现回调机制。"}]}]},{"ID":"20250122160630-sp13vxy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-sp13vxy","updated":"20250122160630"},"Children":[{"ID":"20250122160630-92kxqc6","Type":"NodeParagraph","Properties":{"id":"20250122160630-92kxqc6","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"支持多播（多个方法绑定到同一个委托）。"}]}]}]},{"ID":"20250122160630-bqtz0ic","Type":"NodeThematicBreak","Properties":{"id":"20250122160630-bqtz0ic","updated":"20250122160630"}},{"ID":"20250122160630-lbq35k9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250122160630-lbq35k9","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"2. Event（事件）"}]},{"ID":"20250122160630-4igxwx0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-4igxwx0","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"定义"}]},{"ID":"20250122160630-yq9qg3f","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160630-yq9qg3f","updated":"20250122160630"},"Children":[{"ID":"20250122160630-quee6fc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-quee6fc","updated":"20250122160630"},"Children":[{"ID":"20250122160630-hym24qm","Type":"NodeParagraph","Properties":{"id":"20250122160630-hym24qm","updated":"20250122160630"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Event"},{"Type":"NodeText","Data":" 是基于委托的成员，用于提供发布-订阅模型。"}]}]},{"ID":"20250122160630-w4fvxuj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-w4fvxuj","updated":"20250122160630"},"Children":[{"ID":"20250122160630-42u6rrl","Type":"NodeParagraph","Properties":{"id":"20250122160630-42u6rrl","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"事件是一种特殊的委托，用于限制外部对委托的直接访问。"}]}]}]},{"ID":"20250122160630-394hljf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-394hljf","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"特点"}]},{"ID":"20250122160630-bwtyg7k","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160630-bwtyg7k","updated":"20250122160630"},"Children":[{"ID":"20250122160630-i9tpr2q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-i9tpr2q","updated":"20250122160630"},"Children":[{"ID":"20250122160630-8be1gjq","Type":"NodeParagraph","Properties":{"id":"20250122160630-8be1gjq","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"事件是委托的封装，只能在定义它的类内部触发。"}]}]},{"ID":"20250122160630-psrldb9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-psrldb9","updated":"20250122160630"},"Children":[{"ID":"20250122160630-epez0lh","Type":"NodeParagraph","Properties":{"id":"20250122160630-epez0lh","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"外部代码只能通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"+="},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-="},{"Type":"NodeText","Data":"​ 来订阅或取消订阅事件。"}]}]},{"ID":"20250122160630-mi3c6v9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-mi3c6v9","updated":"20250122160630"},"Children":[{"ID":"20250122160630-qlxmo7k","Type":"NodeParagraph","Properties":{"id":"20250122160630-qlxmo7k","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"事件的使用更安全，避免了外部直接调用或修改委托。"}]}]}]},{"ID":"20250122160630-hcncxci","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-hcncxci","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"用途"}]},{"ID":"20250122160630-ak047iy","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160630-ak047iy","updated":"20250122160630"},"Children":[{"ID":"20250122160630-ufk5tmy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-ufk5tmy","updated":"20250122160630"},"Children":[{"ID":"20250122160630-9pc8y8y","Type":"NodeParagraph","Properties":{"id":"20250122160630-9pc8y8y","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"用于实现观察者模式。"}]}]},{"ID":"20250122160630-gpyuux2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-gpyuux2","updated":"20250122160630"},"Children":[{"ID":"20250122160630-ageez6f","Type":"NodeParagraph","Properties":{"id":"20250122160630-ageez6f","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"常用于 GUI 编程（如按钮点击事件）。"}]}]}]},{"ID":"20250122160630-a3t9fbi","Type":"NodeThematicBreak","Properties":{"id":"20250122160630-a3t9fbi","updated":"20250122160630"}},{"ID":"20250122160630-aoar5la","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250122160630-aoar5la","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"3. 主要区别"}]},{"ID":"20250122160630-73f0ir0","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"||","id":"20250122160630-73f0ir0","updated":"20250122160630"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"特性"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"Delegate（委托）"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"Event（事件）"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"定义"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"一种类型，用于封装方法"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"基于委托的成员，提供发布-订阅模型"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"访问权限"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"可以直接调用和赋值"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"只能在定义它的类内部触发，外部只能订阅"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"多播支持"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"支持多播（绑定多个方法）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"支持多播（绑定多个事件处理程序）"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安全性"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"较低，外部代码可以直接修改或调用"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"较高，外部代码只能订阅或取消订阅"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"典型用途"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"回调机制、方法传递"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"事件驱动编程（如 GUI 事件）"}]}]}]},{"ID":"20250122160630-1kdq73e","Type":"NodeThematicBreak","Properties":{"id":"20250122160630-1kdq73e","updated":"20250122160630"}},{"ID":"20250122160630-x6fr49v","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250122160630-x6fr49v","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"4. 示例代码"}]},{"ID":"20250122160630-xo9de1q","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-xo9de1q","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"Delegate 示例"}]},{"ID":"20250122160630-2fopl87","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250122160630-2fopl87","style":"line-height: 22px;","updated":"20250122160723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"QyM="},{"Type":"NodeCodeBlockCode","Data":"public delegate void MyDelegate(string message);\n\npublic class Program\n{\n    public static void Main()\n    {\n        MyDelegate myDelegate = ShowMessage;\n        myDelegate(\"Hello from Delegate!\");\n    }\n\n    public static void ShowMessage(string message)\n    {\n        Console.WriteLine(message);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250122160630-1za5p6j","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250122160630-1za5p6j","updated":"20250122160749"},"Children":[{"Type":"NodeText","Data":"Event 示例"}]},{"ID":"20250122160630-n1ztk6j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250122160630-n1ztk6j","style":"line-height: 22px;","updated":"20250122160749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Y3NoYXJw"},{"Type":"NodeCodeBlockCode","Data":"public class Button\n{\n    public event EventHandler Click;\n\n    public void OnClick()\n    {\n        Click?.Invoke(this, EventArgs.Empty);\n    }\n}\n\npublic class Program\n{\n    public static void Main()\n    {\n        Button button = new Button();\n        button.Click += Button_Click;\n        button.OnClick();\n    }\n\n    private static void Button_Click(object sender, EventArgs e)\n    {\n        Console.WriteLine(\"Button clicked!\");\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250122160630-k7son5f","Type":"NodeThematicBreak","Properties":{"id":"20250122160630-k7son5f","updated":"20250122160630"}},{"ID":"20250122160630-8f9v707","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250122160630-8f9v707","updated":"20250122160753"},"Children":[{"Type":"NodeText","Data":"5. 总结"}]},{"ID":"20250122160630-iz8fhqd","Type":"NodeList","ListData":{},"Properties":{"id":"20250122160630-iz8fhqd","updated":"20250122160630"},"Children":[{"ID":"20250122160630-ledrmfi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-ledrmfi","updated":"20250122160630"},"Children":[{"ID":"20250122160630-7cixomi","Type":"NodeParagraph","Properties":{"id":"20250122160630-7cixomi","updated":"20250122160630"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Delegate"},{"Type":"NodeText","Data":" 是事件的基础，用于封装方法。"}]}]},{"ID":"20250122160630-eqfll4x","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-eqfll4x","updated":"20250122160630"},"Children":[{"ID":"20250122160630-jbdsr5f","Type":"NodeParagraph","Properties":{"id":"20250122160630-jbdsr5f","updated":"20250122160630"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Event"},{"Type":"NodeText","Data":" 是对委托的封装，提供了更安全的事件驱动编程模型。"}]}]},{"ID":"20250122160630-ojaapda","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250122160630-ojaapda","updated":"20250122160630"},"Children":[{"ID":"20250122160630-q0hmvga","Type":"NodeParagraph","Properties":{"id":"20250122160630-q0hmvga","updated":"20250122160630"},"Children":[{"Type":"NodeText","Data":"在实际开发中，事件更常用于 GUI 和异步编程，而委托则更灵活，适用于需要直接调用方法的场景。"}]}]}]},{"ID":"20250122160753-3v7sfij","Type":"NodeParagraph","Properties":{"id":"20250122160753-3v7sfij","updated":"20250122160753"}}]}